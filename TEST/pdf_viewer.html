<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pdfviewer</title>
  <script src="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.7.570/build/pdf.min.js"></script>

</head>
<body>
   <button id="prev">Oldingi</button>
   <button id="next">Keyingi</button>
   <button id="zoomIn">++</button>
   <button id="zoomOut">--</button>
   <span>Sahifa:<span id="page_num"></span> / <span id="page_count"></span></span>
   <canvas id="pdf_canvas"></canvas> 
    
     
   <script>
    var pdfDoc = null,
    pageNum = 1,
    pageRandering = false,
    pageNumPending = null,
    scale = 1.5,
    canvas = document.getElementById("pdf_canvas")
    ctx = canvas.getContext('2d')

    function renderPage(num){
      pageRendering = true
      pdfDoc.getPage(num).then((page)=>{
        var viewport = page.getViewport({scale:scale});
        canvas.height = viewport.height
        canvas.width = viewport.width

        var renderContext = {
          canvasContext : ctx,
          viewport: viewport,
        }

        var renderTask = page.render(renderContext)
        renderTask.promise.then(()=>{
          pageRendering = false;
          if (pageNumPending !== null){
            renderPage(pageNumPending)
            pageNumPending = null
          }
        })
      })
      document.getElementById('page_num').textContent = num;
    }
    
    function queueRenderPage(num){
      if (pageRendering){
        pageRendering = num
      }else{
        renderPage(num)
      }}

       document.getElementById("prev").addEventListener('click', onPrevPage)
    function onNextPage(){
      if (pageNum >= pdfDoc.numPages){
        return;
      }
      pageNum++;
      queueRenderPage(pageNum)
     }
     document.geElementById('next').addEventListener('click', onNextPage)

    pdfjsLib.getDocument('1984.pdf').promise.then((doc)=>{
      pdfDoc = doc
      document.getElementById('page_count').textContent = doc.numPages;
      renderPage(pageNum)
    })
  </script>
</body>
</html>
  
 